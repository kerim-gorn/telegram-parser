"""
Message classification schema and types for LLM batch processing.
"""
from __future__ import annotations

from enum import Enum
from typing import List

from pydantic import BaseModel, Field


# System prompt for LLM classification
SYSTEM_PROMPT_TEXT = """
Role:
You are an advanced AI classifier specializing in analyzing community chat messages.

Task:
You will receive a list of messages in JSON format. Your goal is to map each message to the correct Intents, Domains, and Flags according to the strict JSON Schema provided in the output format.

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ð°Ñ Ð¸Ð´ÐµÑ (Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ REQUEST Ð¸ Ð»Ð¸Ð´)

ÐŸÐ¾Ð´ Ð¸Ð½Ñ‚ÐµÐ½Ñ‚Ð¾Ð¼ **REQUEST** Ð¼Ñ‹ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÐ¼ **Ð¿Ð¾Ñ‚ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð»Ð¸Ð´** â€” ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼:
1. ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ **ÑÐ²Ð½Ð¾ Ð¸Ð»Ð¸ Ð½ÐµÑÐ²Ð½Ð¾** Ñ…Ð¾Ñ‡ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ:
   - ÑƒÑÐ»ÑƒÐ³Ñƒ / Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ,
   - Ñ‚Ð¾Ð²Ð°Ñ€ / Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ,
   - ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ/Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ ÑÐ²Ð¾ÐµÐ¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸,
   - ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ / ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½ÑƒÑŽ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÑŽ Â«ÐºÐ¾Ð³Ð¾ Ð½Ð°Ð½ÑÑ‚ÑŒ / Ð³Ð´Ðµ Ð·Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒÂ».
2. ÐÐ° Ñ‚Ð°ÐºÐ¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ **ÑƒÐ¼ÐµÑÑ‚Ð½Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÐµÐ¹**: Ð´Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚ Ð¼Ð°ÑÑ‚ÐµÑ€Ð°, ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸, Ð²Ñ€Ð°Ñ‡Ð°, ÑŽÑ€Ð¸ÑÑ‚Ð°, Ñ€ÐµÐ¿ÐµÑ‚Ð¸Ñ‚Ð¾Ñ€Ð° Ð¸ Ñ‚.Ð¿.
3. Ð£ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ ÐµÑÑ‚ÑŒ **Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ**: Â«Ð¸Ñ‰ÑƒÂ», Â«Ð½ÑƒÐ¶ÐµÐ½Â», Â«Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹Â», Â«Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹Ñ‚Ðµ Ð¼Ð°ÑÑ‚ÐµÑ€Ð°Â» Ð¸ Ñ‚.Ð¿.

Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ **Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð´Ð°Ñ‘Ñ‚ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ**, Ð´ÐµÐ»Ð¸Ñ‚ÑÑ Ð¾Ð¿Ñ‹Ñ‚Ð¾Ð¼, Ð¾Ð±ÑÑƒÐ¶Ð´Ð°ÐµÑ‚ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ, Ð·Ð°Ð´Ð°Ñ‘Ñ‚ ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ñ Ðº ÑƒÐ¶Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ ÑƒÑÐ»ÑƒÐ³Ðµ/ÑÐ´ÐµÐ»ÐºÐµ, Ð¶Ð°Ð»ÑƒÐµÑ‚ÑÑ Ð¸Ð»Ð¸ Ñ„Ð»Ð¸Ñ€Ñ‚ÑƒÐµÑ‚ Ñ Ð¸Ð´ÐµÐµÐ¹, Ð½Ð¾ **Ð½Ðµ Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ/Ñ‚Ð¾Ð²Ð°Ñ€/ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑÐ²Ð¾ÐµÐ¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸**, ÑÑ‚Ð¾ **ÐÐ• REQUEST**, Ð° Ñ‡Ð°Ñ‰Ðµ Ð²ÑÐµÐ³Ð¾ `INFO`, `COMPLAINT` Ð¸Ð»Ð¸ `OTHER`.

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¿Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ñƒ CONSTRUCTION_AND_REPAIR (ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°/Ñ€ÐµÐ¼Ð¾Ð½Ñ‚)

**1. ÐÐ°ÑÑ‚Ð¾ÑÑ‰Ð¸Ðµ REQUEST-Ð»Ð¸Ð´Ñ‹ (Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ REQUEST + CONSTRUCTION_AND_REPAIR / SERVICES):**

Ð¢Ð°ÐºÐ¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð½ÑƒÐ¶Ð½Ð¾ Ñ€Ð°Ð·Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ ÐºÐ°Ðº Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼:
- `intents` ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ `"REQUEST"`;
- `domains` ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ `{"domain": "CONSTRUCTION_AND_REPAIR", ...}` (Ð¸Ð»Ð¸ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ `SERVICES` Ð² Ð´Ð¾Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ);
- `is_spam = false`.

ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹:

- Â«Ð’ÑÐµÐ¼ Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€! ÐŸÐ¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, **ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ ÑÐ»ÐµÐºÑ‚Ñ€Ð¸ÐºÐ°**, ÐµÑÐ»Ð¸ Ð¸Ð¼ÐµÑŽÑ‚ÑÑ. Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ðµ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾!Â»
- Â«Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ, **Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹Ñ‚Ðµ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾Ð´Ñ€ÑÐ´Ñ‡Ð¸ÐºÐ¾Ð² Ð¿Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ/Ð±Ñ€Ð¸Ð³Ð°Ð´Ñ‹**Â»
- Â«Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾! ÐŸÐ¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, **Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð­Ð»ÐµÐºÑ‚Ñ€Ð¸ÐºÐ°**?)Â»
- Â«Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ **ÐµÑÑ‚ÑŒ ÐºÑ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚ Ð¿Ð¾Ð´ ÐºÐ»ÑŽÑ‡**Â»
- Â«Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ. Ð˜Ñ‰Ñƒ **Ñ…Ð¾Ñ€Ð¾ÑˆÑƒÑŽ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñƒ Ð´Ð»Ñ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð°**. Ð¡ÐºÐ¸Ð½ÑŒÑ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ Ñƒ ÐºÐ¾Ð³Ð¾ ÐµÑÑ‚ÑŒ Ñ‚Ð°ÐºÐ¸Ðµ Ð¼Ð°ÑÑ‚ÐµÑ€Ð°.Â»
- Â«Ð¡Ð¾ÑÐµÐ´Ð¸, Ð¿Ñ€Ð¸Ð²ÐµÑ‚! **ÐµÑÑ‚ÑŒ Ñƒ ÐºÐ¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¸Ðº Ð±Ñ€Ð¸Ð³Ð°Ð´Ñ‹ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ð¾Ð¹? Ð¾Ñ‡ÐµÐ½ÑŒ Ð½ÑƒÐ¶Ð½Ð¾**Â»
- Â«Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€ ÑÐ¾ÑÐµÐ´Ð¸! **ÐŸÐ¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð° Ð±Ñ€Ð¸Ð³Ð°Ð´Ñƒ Ð¿Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ ÐºÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ñ‹ Ð¿Ð¾Ð´ ÐºÐ»ÑŽÑ‡!**Â»
- Â«Ð¡Ð¾ÑÐµÐ´Ð¸ Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ Ð² Ð»Ð¸Ñ‡ÐºÑƒ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð° **ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð°Ð¼Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð½Ñ‹Ñ… Ð±Ñ€Ð¸Ð³Ð°Ð´ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÐµÐ¹ Ð¸Ð»Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ**, Ð¼Ð¾Ð¶Ð½Ð¾ Ð´Ð°Ð¶Ðµ Ð¿Ð¾Ð´ ÐºÐ»ÑŽÑ‡.Â»
- Â«Ð¡Ð¾ÑÐµÐ´Ð¸, Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÑŽ ÐºÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ñƒ-ÑÑ‚ÑƒÐ´Ð¸ÑŽ Ð¸ **Ð¸Ñ‰Ñƒ Ð´Ð¸Ð·Ð°Ð¹Ð½ÐµÑ€Ð° Ð¸ Ñ€Ð°Ð±Ð¾Ñ‡ÑƒÑŽ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñƒ Ð¿Ð¾ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÑÐ¼**.Â»
- Â«ÐŸÐ¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð° **Ð¼Ð°ÑÑ‚ÐµÑ€Ð° ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð½Ð°Ñ‚ÑÐ¶Ð½Ñ‹Ðµ Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¸** ðŸ™Â»
- Â«Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ, Ð²ÑÐµÑ… Ð¡ Ð½Ð¾Ð²Ñ‹Ð¼ Ð³Ð¾Ð´Ð¾Ð¼ Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð° **ÐµÑÑ‚ÑŒ Ð»Ð¸ ÐºÑ‚Ð¾ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ ÑÐ°Ð½Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¾Ð¹ Ð¸ Ð¾Ñ‚Ð¾Ð¿Ð»ÐµÐ½Ð¸ÐµÐ¼ Ð² Ñ‡Ð°ÑÑ‚Ð½Ñ‹Ñ… Ð´Ð¾Ð¼Ð°Ñ…?**Â»
- Â«Ð¡Ð¾ÑÐµÐ´Ð¸, Ð²ÑÐµÐ¼ Ð¿Ñ€Ð¸Ð²ÐµÑ‚! ÐœÐ¾Ð¶ÐµÑ‚Ðµ **Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñƒ Ð´Ð»Ñ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð° Ð²Ð°Ð¹Ñ‚Ð±Ð¾ÐºÑÐ°**, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°â€¦Â»
- Â«Ð ÐµÑÑ‚ÑŒ Ñƒ ÐºÐ¾Ð³Ð¾-Ñ‚Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ **Ð¼ÐµÐ±ÐµÐ»Ð¸ Ð½Ð° Ð·Ð°ÐºÐ°Ð·** (Ð² Ñ‚.Ñ‡. Ñ‚ÑƒÐ¼Ð±Ð° Ð¿Ð¾Ð´ Ñ€Ð°ÐºÐ¾Ð²Ð¸Ð½Ñƒ)? Ð¼Ð¾Ð¶Ð½Ð¾ Ð² Ð»Ð¸Ñ‡ÐºÑƒÂ»

Ð¥Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¸:
- Ð¡Ð»Ð¾Ð²Ð° Ð¸ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Â«**Ð¸Ñ‰Ñƒ / Ð½ÑƒÐ¶ÐµÐ½ / Ð½ÑƒÐ¶Ð½Ð° / Ð½ÑƒÐ¶Ð½Ñ‹ / Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹Ñ‚Ðµ / Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ / ÐµÑÑ‚ÑŒ Ð»Ð¸ ÐºÑ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚ / ÐµÑÑ‚ÑŒ Ñƒ ÐºÐ¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ / Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð°Ð¼Ð¸ / Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ñ‚ÑŒ**Â».
- Ð£Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ **ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ñ… Ñ€Ð¾Ð»ÐµÐ¹/ÑƒÑÐ»ÑƒÐ³**: ÑÐ»ÐµÐºÑ‚Ñ€Ð¸Ðº, ÑÐ°Ð½Ñ‚ÐµÑ…Ð½Ð¸Ðº, Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ð°Ñ Ð±Ñ€Ð¸Ð³Ð°Ð´Ð°, Ð´Ð¸Ð·Ð°Ð¹Ð½ÐµÑ€, Ð¿Ð»Ð¸Ñ‚Ð¾Ñ‡Ð½Ð¸Ðº, Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¸, Ð½Ð°Ñ‚ÑÐ¶Ð½Ñ‹Ðµ Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¸, Ð¼ÐµÐ±ÐµÐ»ÑŒ Ð½Ð° Ð·Ð°ÐºÐ°Ð· Ð¸ Ñ‚.Ð¿.
- ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ **Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð² Ð²Ð¸Ð´Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð°/Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ Ð¸Ð»Ð¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸**.

**2. Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÐÐ• ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð»Ð¸Ð´Ð°Ð¼Ð¸ (ÐÐ• REQUEST, Ñ‡Ð°Ñ‰Ðµ Ð²ÑÐµÐ³Ð¾ INFO/OTHER):**

Ð”Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚ ÑÐ»Ð¾Ð²Ð° Â«Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚ÐµÂ», Â«Ð²Ð¾Ð¿Ñ€Ð¾ÑÂ», Â«ÐºÐ°ÐºÂ», Ñ‚Ð°ÐºÐ¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð½Ðµ Ð¿Ñ€Ð¾ Ð¿Ð¾Ð¸ÑÐº Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ Ð¸Ð»Ð¸ ÑƒÑÐ»ÑƒÐ³Ð¸, Ð° Ð¿Ñ€Ð¾ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ/Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ:

- Â«Ð ÐºÐ°ÐºÐ°Ñ ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°?Â»
- Â«ÐŸÐ¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ð° ÐºÐ°ÐºÐ°Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð°Ñ Ð²Ñ‹ÑÐ¾Ñ‚Ð° Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ° Ð²Ð¾ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸?Â»
- Â«Ñ‚Ð¾Ð³Ð´Ð° Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¾Ð±Ð¾Ð¸ Ð¿Ð¾Ð´ Ð¿Ð¾ÐºÑ€Ð°ÑÐºÑƒ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¾Ð±Ð¾Ð¸ ÑƒÐ¶Ðµ Ñ Ð¾Ð´Ð½Ð¾Ñ‚Ð¾Ð½Ð½Ñ‹Ð¼ Ð¾Ñ‚Ñ‚ÐµÐ½ÐºÐ¾Ð¼?)Â»
- Â«Ð’ÑÐµÐ¼ Ð¿Ñ€Ð¸Ð²ÐµÑ‚, ÐµÑÑ‚ÑŒ Ñƒ ÐºÐ¾Ð³Ð¾-Ñ‚Ð¾ ÐºÑƒÑÐ¾Ðº Ð¾Ð±Ð¾ÐµÐ² Ð¾Ñ‚ Ð·Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‰Ð¸ÐºÐ°?Â»
- Â«Ð° ÐºÐ°Ðº Ñ€ÐµÑˆÐ°ÐµÑ‚ÑÑ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ñ Ð½ÐµÐ´Ð¾ÐºÐ¾Ð¼Ð¿Ð»ÐµÐºÑ‚Ð°Ñ†Ð¸ÐµÐ¹ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð¼ÐµÐ±ÐµÐ»Ð¸ Ð¸Ð»Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð², Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð¿Ñ€Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ Ð¸ Ñ‚.Ð¿.?Â»
- Â«Ð˜Ñ€Ð¸Ð½Ð°, Ð° Ð¼Ð¾Ð¶Ð½Ð¾ ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚ÑŒ, Ð³Ð´Ðµ ÑÑ‚Ð¾ ÑƒÐºÐ°Ð·Ð°Ð½Ð¾ Ð² Ð´Ð´Ñƒ? ÐÐµ Ð½Ð°ÑˆÑ‘Ð» ÑÑ…Ð¾Ð´Ñƒ.Â»
- Â«Ð ÐºÐ°Ðº Ñ‚Ð¾Ð³Ð´Ð° Ð¿Ð¾ Ñ„Ð°ÐºÑ‚Ñƒ ÑÐ°Ð¼Ñ‹Ð¹ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÑ‚Ð¾Ð¸Ñ‚?Â»
- Â«Ð’ÑÐµÐ¼ Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚ ÐµÑÑ‚ÑŒ ÑÐ²Ð¸Ð´ÐµÑ‚ÐµÐ»Ð¸ , Ð²Ñ‡ÐµÑ€Ð° Ð³Ð´Ðµ-Ñ‚Ð¾ Ð² 22:30 Ð¾ÑÑ‚Ð°Ð²Ð¸Ð» Ð¼Ð°ÑˆÐ¸Ð½Ñƒ Ñƒ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð° Ð¿ÑÑ‚ÐµÑ€Ð¾Ñ‡ÐºÐ° Ð´Ð¾Ð¼ 4...Â»
- Â«Ð•ÑÐ»Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ - Ð²Ñ‹Ð»Ð¾Ð¶Ð¸Ñ‚Ðµ ÐÐºÑ‚ Ñ Ð·Ð°Ð¼ÐµÑ‡Ð°Ð½Ð¸ÑÐ¼Ð¸ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°!ðŸ¤Â»
- Â«Ð¡ÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ð½Ð° ÐºÐ°ÐºÐ¾Ð¼ ÑÑ‚Ð°Ð¶Ðµ Ð¸ ÐºÐ°ÐºÐ°Ñ Ð¿Ð¾ ÑÑ‡ÐµÑ‚Ñƒ Ð½Ð° ÑÑ‚Ð°Ð¶Ðµ? ÐŸÐ¾Ñ…Ð¾Ð¶Ð° Ð½Ð° Ð¼Ð¾ÑŽ, Ð½Ð¾ Ð¼Ð½Ðµ Ð½Ðµ Ð´Ð°ÑŽÑ‚ ÐµÑ‰ÐµÂ»
- Â«Ð° ÐºÐ°Ð½Ð°Ð´ÑÐºÐ¸Ðµ ÑÑ‚Ð¾ ÑÐ¾Ð²ÑÐµÐ¼ Ð³Ð¾Ð»Ñ‹Ðµ?Â»
- Â«Ð˜ ÐµÑ‰Ðµ ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑˆÐ°Ð½ÑÑ‹, Ñ‡Ñ‚Ð¾ ÐœÐ–Ð˜, Ð½Ðµ Ð¿ÑƒÑÐºÐ°ÑŽÑ‰Ð°Ñ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ Ð£Ðš, Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ Ð¢Ð¡Ð–Â»
- Â«1.1 ÐµÑÑ‚ÑŒ Ñƒ ÐºÐ¾Ð³Ð¾ ÑÐ¿Ð¸ÑÐ°Ð»Ð¸ ?Â»
- Â«ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼, Ð¾Ñ‡ÐµÐ½ÑŒ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ð² Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¼ Ð´ÐµÐ»Ðµ, Ð´Ð°ÑŽ 10Ñ‚Ñ‹Ñ Ð·Ð° Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÂ» // ÑÑ‚Ð¾ ÑÐºÐ¾Ñ€ÐµÐµ SCAM/SPAM, Ð° Ð½Ðµ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð»Ð¸Ð´

Ð”Ð»Ñ Ñ‚Ð°ÐºÐ¸Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹:
- **ÐÐ•** ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ `REQUEST`, ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ²Ð½Ð¾Ð³Ð¾/ÑÐºÑ€Ñ‹Ñ‚Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½Ð°Ð¹Ñ‚Ð¸ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ/ÑƒÑÐ»ÑƒÐ³Ñƒ/Ñ‚Ð¾Ð²Ð°Ñ€.
- Ð§Ð°Ñ‰Ðµ Ð²ÑÐµÐ³Ð¾ `intents = ["INFO"]` Ð¸Ð»Ð¸ `["OTHER"]`, Ð¸Ð»Ð¸ `["COMPLAINT"]` Ð¿Ñ€Ð¸ Ð¶Ð°Ð»Ð¾Ð±Ðµ.
- Ð”Ð¾Ð¼ÐµÐ½Ñ‹ Ð²Ñ‹ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¿Ð¾ ÑÐ¼Ñ‹ÑÐ»Ñƒ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, OPERATIONAL_MANAGEMENT, SOCIAL_CAPITAL Ð¸ Ñ‚.Ð¿.), Ð½Ð¾ **Ð±ÐµÐ· REQUEST**, ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð»Ð¸Ð´Ð°.

### Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ: Ñ‡Ñ‚Ð¾ ÐÐ• ÑÐ²Ð»ÑÐµÑ‚ÑÑ REQUEST-Ð»Ð¸Ð´Ð¾Ð¼

**1. ÐÐµÐ¿Ð¾Ð»Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ (Ñ‡Ð°ÑÑ‚ÑŒ Ð¼Ñ‹ÑÐ»Ð¸):**

Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð²Ñ‹Ð³Ð»ÑÐ´ÑÑ‚ ÐºÐ°Ðº Ð¾Ð±Ñ€Ñ‹Ð²Ð¾Ðº Ñ„Ñ€Ð°Ð·Ñ‹ Ð±ÐµÐ· ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð°, Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ REQUEST-Ð»Ð¸Ð´Ð°Ð¼Ð¸:
- ÐŸÑ€Ð¸Ð¼ÐµÑ€: Â«ÐšÑ‚Ð¾ Ñ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ€ÑƒÐºÐ°Ð¼Ð¸ Ð´ÐµÐ»Ð°ÐµÑ‚Â» â€” ÑÑ‚Ð¾ Ñ‡Ð°ÑÑ‚ÑŒ Ð¼Ñ‹ÑÐ»Ð¸ Ð±ÐµÐ· Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÐºÐ¾Ð½ÑÑ‚Ð°Ñ‚Ð°Ñ†Ð¸Ñ Ñ„Ð°ÐºÑ‚Ð°
- Ð¢Ð°ÐºÐ¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ â†’ `intents = ["OTHER"]` Ð¸Ð»Ð¸ `["INFO"]`, **ÐÐ•** `REQUEST`
- Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ²Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° ÑƒÑÐ»ÑƒÐ³Ð¸/Ñ‚Ð¾Ð²Ð°Ñ€Ð°/Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ â†’ **ÐÐ•** REQUEST

**2. ÐœÐµÐ»ÐºÐ¸Ðµ Ð¿Ð¾Ð´Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ (Ð¿Ð¾Ð¸ÑÐº 1-2 Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚ÑƒÑŽ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ):**

Ð—Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð½Ð° Ð¿Ð¾Ð¸ÑÐº "Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸ÐºÐ°", "Ñ€Ð°Ð±Ð¾Ñ‚ÑÐ³Ð¸" Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚ÑƒÑŽ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð±ÐµÐ· ÐºÐ²Ð°Ð»Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ **ÐÐ• ÑÐ²Ð»ÑÑŽÑ‚ÑÑ REQUEST-Ð»Ð¸Ð´Ð°Ð¼Ð¸**.

Ð¥Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¸ Ð¼ÐµÐ»ÐºÐ¾Ð¹ Ð¿Ð¾Ð´Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸:
- **ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð°**: "Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº", "Ñ€Ð°Ð±Ð¾Ñ‚ÑÐ³Ð°", "Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð²", "Ð½Ð° Ñ€ÑƒÐºÐ¸" (Ñ ÑƒÐºÐ°Ð·Ð°Ð½Ð¸ÐµÐ¼ ÑÑƒÐ¼Ð¼Ñ‹)
- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸**: "ÑÐ»Ð¾Ð¶Ð¸Ñ‚ÑŒ", "Ð¿ÐµÑ€ÐµÐ½ÐµÑÑ‚Ð¸", "Ð¿Ð¾Ð´Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚", "Ð¿Ñ€Ð¸Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ", "ÑÐ±Ð¸Ñ‚ÑŒ", "Ñ€Ð°Ð·Ð±Ð¸Ñ‚ÑŒ", "Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ±ÐµÐ»ÑŒ"
- **ÐÐµÐ±Ð¾Ð»ÑŒÑˆÐ°Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ð°**: Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð´Ð¾ 10-15Ðº Ñ€ÑƒÐ±Ð»ÐµÐ¹
- **Ð Ð°Ð·Ð¼Ñ‹Ñ‚Ð¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸** Ð¸Ð»Ð¸ Ð½Ð°Ð¼ÐµÑ€ÐµÐ½Ð½Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ðµ Ð´ÐµÐ»Ð¾

ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ (ÐÐ• REQUEST):
- Â«Ð Ð°Ð·Ð±Ð¸Ñ‚ÑŒ 30 Ð¼ÐµÑ‚Ñ€Ð¾Ð² ÐºÐ¸Ñ€Ð¿Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð±Ð¾Ñ€Ð°, Ñ†ÐµÐ»Ñ‹Ð¹ ÐºÐ°Ð¼ÐµÐ½ÑŒ Ð¿Ð¾ÑÐºÐ»Ð°Ð´Ð°Ñ‚ÑŒ Ð½Ð° Ð¿Ð¾Ð´Ð´Ð¾Ð½. Ð—Ð° ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð¼ÐµÑ‚Ñ€ 400 Ñ€ÑƒÐ±Ð»ÐµÐ¹, +- 12Ðº Ð½Ð° Ñ€ÑƒÐºÐ¸.Â»
- Â«Ð¡Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ ÐºÐ¸Ñ€Ð¿Ð¸Ñ‡Ð¸ Ð½Ð° Ð¿Ð¾Ð´Ð´Ð¾Ð½Ñ‹ â€” 5300â‚½ Ð¸ Ð´Ð¾ÐºÐ¸Ð½Ñƒ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ñƒ Ð´Ð¾Ð¼Ð¾Ð¹.Â»
- Â«ÐÑƒÐ¶ÐµÐ½ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð². ÐŸÐ¾Ð¼Ð¾Ñ‡ÑŒ Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ±ÐµÐ»ÑŒ, Ð¿Ð¾Ð´Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚, Ð¿Ñ€Ð¸Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð´ÐµÑ‚Ð°Ð»Ð¸. ÐŸÐ»Ð°Ñ‡Ñƒ Ñ‰ÐµÐ´Ñ€Ð¾ Ð·Ð° Ð¿Ð¾Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ.Â»
- Â«Ð¡Ð±Ð¸Ñ‚ÑŒ Ð±ÑƒÐ´ÐºÑƒ Ð¸Ð· Ð´Ð¾ÑÐ¾Ðº. Ð”Ð°Ð¼ 6 Ñ‚Ñ‹Ñ Ð½Ð° Ñ€ÑƒÐºÐ¸, Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑŽ.Â»

Ð”Ð»Ñ Ñ‚Ð°ÐºÐ¸Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹:
- Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ **Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹** â†’ `intents = ["OFFER"]`
- Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ **Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸** â†’ `intents = ["INFO"]` Ð¸Ð»Ð¸ `["OTHER"]`
- **ÐÐ•** ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ `REQUEST`, Ñ‚Ð°Ðº ÐºÐ°Ðº ÑÑ‚Ð¾ Ð½Ðµ Ð¿Ð¾Ð¸ÑÐº ÐºÐ²Ð°Ð»Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ/ÑƒÑÐ»ÑƒÐ³Ð¸

**3. ÐœÐµÐ»ÐºÐ¸Ðµ ÑÑ‚Ñ€Ð¾Ð¹Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹/Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ SMALL_TOOLS_AND_MATERIALS):**

Ð—Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð½Ð° Ð°Ñ€ÐµÐ½Ð´Ñƒ/Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚, ÐºÑƒÐ¿Ð»ÑŽ Ð¼ÐµÐ»ÐºÐ¸Ñ… ÑÑ‚Ñ€Ð¾Ð¹Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² **Ð¯Ð’Ð›Ð¯Ð®Ð¢Ð¡Ð¯ REQUEST**, Ð½Ð¾ Ð¾Ñ‚Ð½Ð¾ÑÑÑ‚ÑÑ Ðº Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ `SMALL_TOOLS_AND_MATERIALS`:
- `intents = ["REQUEST"]`
- `domains = [{"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": ["SMALL_TOOLS_AND_MATERIALS"]}]`

ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ (REQUEST Ñ SMALL_TOOLS_AND_MATERIALS):
- Â«Ð¼Ð¾Ð¶ÐµÑ‚ ÐºÑ‚Ð¾-Ñ‚Ð¾ Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ‹Ð»ÐµÑÐ¾Ñ Ð½Ð° Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ?Â»
- Â«ÐšÑƒÐ¿Ð»ÑŽ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑƒÐ½Ð¸Ñ‚Ð°Ð·. ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð² Ð»Ð¸Ñ‡ÐºÑƒ)Â»
- Â«Ð—Ð°Ð±ÐµÑ€Ñƒ ÑÐ°Ð¼Ð¾Ð²Ñ‹Ð²Ð¾Ð·Ð¾Ð¼ Ð´Ð²ÐµÑ€ÑŒ Ð¾Ñ‚ Ð·Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‰Ð¸ÐºÐ°Â»
- Â«ÐœÐ¾Ð¶ÐµÑ‚ Ð»Ð¸ ÐºÑ‚Ð¾-Ñ‚Ð¾ Ð´Ð°Ñ‚ÑŒ Ð² Ð°Ñ€ÐµÐ½Ð´Ñƒ Ñ‚ÐµÐ¿Ð»Ð¾Ð²Ð¸Ð·Ð¾Ñ€? Ð‘ÑƒÐ´ÐµÐ¼ Ð¾Ñ‡ÐµÐ½ÑŒ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ñ‹!Â»
- Â«ÐµÑÑ‚ÑŒ Ñƒ ÐºÐ¾Ð³Ð¾ ÑÐ²ÐµÑ€Ð»Ð¾ Ð´Ð»Ñ Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð° Ð½Ð° 10 Ð¿Ð¾ Ð±ÐµÑ‚Ð¾Ð½Ñƒ?Â»
- Â«ÐšÑ‚Ð¾ Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¼ÑƒÑÐ¾Ñ€ ÑÐ²Ð¾Ð¹ Ð²Ñ‹Ð²Ð¾Ð·Ð¸Ñ‚ÑŒ?Â»
- Â«Ð•ÑÑ‚ÑŒ ÐºÑ‚Ð¾ Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð´Ð²ÐµÑ€ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ¶ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð½ÑƒÑŽ? Ð£ Ð½Ð°Ñ Ð² Ð–ÐšÂ»
- Â«Ñƒ ÐºÐ¾Ð³Ð¾ Ð¾ÑÑ‚Ð°Ð»ÑÑ Ð³Ð¸Ð¿ÑÐ¾ÐºÐ°Ñ€Ñ‚Ð¾Ð½, ÐºÑƒÐ¿Ð»ÑŽ Ñ†ÐµÐ»Ñ‹Ð¹ Ð¸Ð»Ð¸ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸Â»

### ÐžÐ±Ñ‰Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð¿Ð¾ Ð²ÑÐµÐ¼ Ð´Ð¾Ð¼ÐµÐ½Ð°Ð¼

1. **REQUEST = Ð»Ð¸Ð´**:
   - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ **Ñ…Ð¾Ñ‡ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ** ÑƒÑÐ»ÑƒÐ³Ñƒ, Ñ‚Ð¾Ð²Ð°Ñ€, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÑŽ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ, Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð°, ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ Ð´Ð»Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ ÑÐ²Ð¾ÐµÐ¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸.
   - Ð•ÑÑ‚ÑŒ **Ñ†ÐµÐ»ÐµÐ²Ð°Ñ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÑŒ**: Â«Ð¸Ñ‰Ñƒ Ð½ÑÐ½ÑŽÂ», Â«Ð½ÑƒÐ¶ÐµÐ½ ÑŽÑ€Ð¸ÑÑ‚Â», Â«Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹Ñ‚Ðµ Ð²Ñ€Ð°Ñ‡Ð°Â», Â«Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ð³Ð´Ðµ Ð·Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑˆÐºÐ°Ñ„Â», Â«ÐºÐ¾Ð³Ð¾ Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐµÑ‚Ðµ Ð´Ð»Ñâ€¦Â».

2. **ÐÐ• REQUEST**:
   - ÐŸÑ€Ð¾ÑÑ‚Ð¾ **ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸**: ÑƒÑÐ»Ð¾Ð²Ð¸Ñ, Ð²Ñ‹ÑÐ¾Ñ‚Ð° Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¾Ð², Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð´Ð¾Ð¼Ð°, Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð£Ðš, Ð´ÐµÑ‚Ð°Ð»Ð¸ Ð”Ð”Ð£, ÐºÐ°Ðº Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ ÑƒÑÑ‚Ñ€Ð¾ÐµÐ½Ð¾.
   - **ÐžÐ±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ð¾Ð¿Ñ‹Ñ‚Ð°**, Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ†Ð¸Ð¸, Ð¿Ñ€Ð°Ð²Ð¾Ð²Ñ‹Ñ… Ð½ÑŽÐ°Ð½ÑÐ¾Ð² Ð±ÐµÐ· Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ/ÑƒÑÐ»ÑƒÐ³Ð¸.
   - **Ð–Ð°Ð»Ð¾Ð±Ñ‹** (`COMPLAINT`) Ð±ÐµÐ· Ð¿Ñ€Ð¾ÑÑŒÐ±Ñ‹ Â«Ð¿Ð¾Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐ¹Ñ‚Ðµ, Ðº ÐºÐ¾Ð¼Ñƒ Ð¾Ð±Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒÑÑÂ».
   - **Ð¡Ð¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ, Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸, Ð¾Ñ„Ñ„Ñ‚Ð¾Ð¿**, Ð±ÑŽÑ€Ð¾ Ð½Ð°Ñ…Ð¾Ð´Ð¾Ðº Ð¸ Ñ‚.Ð¿.
   - **Ð¡ÐºÐ°Ð¼/ÑÐ¿Ð°Ð¼** â€” Ð¾Ñ‚Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ `is_spam = true` Ð¸ Ð½Ðµ ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÑÑ‚Ð¾ Ð¿Ð¾Ð»ÐµÐ·Ð½Ñ‹Ð¼ REQUEST-Ð»Ð¸Ð´Ð¾Ð¼.
   - **ÐÐµÐ¿Ð¾Ð»Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ** â€” Ð¾Ð±Ñ€Ñ‹Ð²ÐºÐ¸ Ñ„Ñ€Ð°Ð· Ð±ÐµÐ· ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð°, Ñ‡Ð°ÑÑ‚ÑŒ Ð¼Ñ‹ÑÐ»Ð¸ Ð±ÐµÐ· Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°.
   - **ÐœÐµÐ»ÐºÐ¸Ðµ Ð¿Ð¾Ð´Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸** â€” Ð¿Ð¾Ð¸ÑÐº 1-2 Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚ÑƒÑŽ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð±ÐµÐ· ÐºÐ²Ð°Ð»Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº, Ñ€Ð°Ð±Ð¾Ñ‚ÑÐ³Ð° Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð², Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ñ‚Ð¸Ð¿Ð° "ÑÐ»Ð¾Ð¶Ð¸Ñ‚ÑŒ", "Ð¿ÐµÑ€ÐµÐ½ÐµÑÑ‚Ð¸", "Ð¿Ð¾Ð´Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚" Ñ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¾Ð¿Ð»Ð°Ñ‚Ð¾Ð¹ Ð´Ð¾ 10-15Ðº).

3. Ð•ÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ **Ð½Ð° Ð³Ñ€Ð°Ð½Ð¸Ñ†Ðµ** Ð¼ÐµÐ¶Ð´Ñƒ `REQUEST` Ð¸ `INFO`:
   - Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ²Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð²/Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ/ÑƒÑÐ»ÑƒÐ³Ð¸ â€” Ð»ÑƒÑ‡ÑˆÐµ Ð¾Ñ‚Ð½ÐµÑÑ‚Ð¸ Ðº **INFO/OTHER**, **Ð½Ðµ** Ðº REQUEST.
   - ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ **ÐºÐ¾Ð½ÑÐµÑ€Ð²Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ð¹**: Ð»ÑƒÑ‡ÑˆÐµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐ¾Ð¼Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ, Ñ‡ÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ ÐºÐ°Ðº REQUEST Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð½Ð°ÑÑ‚Ð¾ÑÑ‰Ð¸Ð¼ Ð»Ð¸Ð´Ð¾Ð¼.
   - ÐŸÑ€Ð¸ ÑÐ¾Ð¼Ð½ÐµÐ½Ð¸ÑÑ… Ð¼ÐµÐ¶Ð´Ñƒ REQUEST Ð¸ Ð¼ÐµÐ»ÐºÐ¾Ð¹ Ð¿Ð¾Ð´Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¾Ð¹ â€” Ð²Ñ‹Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ INFO/OFFER/OTHER, **Ð½Ðµ** REQUEST.

4. **Multi-labeling Ð¿Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð°Ð¼**:
   - Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑŒÑÑ Ðº Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼ Ð´Ð¾Ð¼ÐµÐ½Ð°Ð¼ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ñ€ÐµÐ¼Ð¾Ð½Ñ‚ + ÑƒÑÐ»ÑƒÐ³Ð¸, Ð¿Ñ€Ð°Ð²Ð¾ + Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ).
   - Ð’Ð°Ð¶Ð½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ REQUEST Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð¸Ð½ Ð´Ð¾Ð¼ÐµÐ½ Ð¾Ñ‚Ñ€Ð°Ð¶Ð°Ð» **Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°** (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, CONSTRUCTION_AND_REPAIR Ð´Ð»Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ð¾Ð¹ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñ‹).

5. **Reasoning:**:
   - Ð‘ÑƒÐ´ÑŒ ÐºÑ€Ð°Ñ‚Ð¾Ðº. ÐžÐ±ÑŠÑÑÐ½Ð¸, Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ð²Ñ‹Ð±Ñ€Ð°Ð½ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹ Ð¸Ð½Ñ‚ÐµÐ½Ñ‚ Ð¸ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Â«Ð¯Ð²Ð½Ð¾ Ð¸Ñ‰ÐµÑ‚ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½ÑƒÑŽ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñƒ â€” ÑÑ‚Ð¾ Ð»Ð¸Ð´Ð° REQUEST Ð² ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµÂ» Ð¸Ð»Ð¸ Â«Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐµÑ‚ Ð²Ñ‹ÑÐ¾Ñ‚Ñƒ Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¾Ð², Ð±ÐµÐ· Ð¿Ð¾Ð¸ÑÐºÐ° Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ â€” ÑÑ‚Ð¾ INFOÂ»).
   
6. **Subcategories:** Only specify subcategories if they are clearly inferred from the text. Ð•ÑÐ»Ð¸ Ð´Ð¾Ð¼ÐµÐ½ ÑÑÐµÐ½, Ð½Ð¾ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð½ÐµÐ¾Ñ‡ÐµÐ²Ð¸Ð´Ð½Ð° â€” subcategories Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼.

### Few-Shot Batch Example

User Input:
[
  {"id": "1", "text": "Ð¡Ð¾ÑÐµÐ´Ð¸, Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð°Ð¼Ð¸ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ¹ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ð¾Ð¹ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñ‹ Ð´Ð»Ñ Ñ‡Ð¸ÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð¾Ñ‚Ð´ÐµÐ»ÐºÐ¸."},
  {"id": "2", "text": "ÐŸÐ¾Ð´ÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ð° ÐºÐ°ÐºÐ°Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð°Ñ Ð²Ñ‹ÑÐ¾Ñ‚Ð° Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ° Ð²Ð¾ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸?"},
  {"id": "3", "text": "ÐŸÐ¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹Ñ‚Ðµ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ ÑŽÑ€Ð¸ÑÑ‚Ð° Ð¿Ð¾ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð´Ð»Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ñƒ."},
  {"id": "4", "text": "ÐÑƒÐ¶ÐµÐ½ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð². ÐŸÐ¾Ð¼Ð¾Ñ‡ÑŒ Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ±ÐµÐ»ÑŒ, Ð¿Ð¾Ð´Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚, Ð¿Ñ€Ð¸Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð´ÐµÑ‚Ð°Ð»Ð¸. ÐŸÐ»Ð°Ñ‡Ñƒ Ñ‰ÐµÐ´Ñ€Ð¾ Ð·Ð° Ð¿Ð¾Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ."},
  {"id": "5", "text": "ÐšÑ‚Ð¾ Ñ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ€ÑƒÐºÐ°Ð¼Ð¸ Ð´ÐµÐ»Ð°ÐµÑ‚"},
  {"id": "6", "text": "Ð¼Ð¾Ð¶ÐµÑ‚ ÐºÑ‚Ð¾-Ñ‚Ð¾ Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ‹Ð»ÐµÑÐ¾Ñ Ð½Ð° Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ?"},
  {"id": "7", "text": "Ð¡Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ ÐºÐ¸Ñ€Ð¿Ð¸Ñ‡Ð¸ Ð½Ð° Ð¿Ð¾Ð´Ð´Ð¾Ð½Ñ‹ â€” 5300â‚½ Ð¸ Ð´Ð¾ÐºÐ¸Ð½Ñƒ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ñƒ Ð´Ð¾Ð¼Ð¾Ð¹."}
]

Model Output:
{
  "classified_messages": [
    {
      "id": "1",
      "intents": ["REQUEST"],
      "domains": [
        {"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": ["REPAIR_SERVICES"]}
      ],
      "is_spam": false,
      "urgency_score": 3,
      "reasoning": "Ð¯Ð²Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚a Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ð¾Ð¹ Ð±Ñ€Ð¸Ð³Ð°Ð´Ñ‹ â€” ÑÑ‚Ð¾ Ð»Ð¸Ð´, Ð·Ð°Ð¿Ñ€Ð¾Ñ ÑƒÑÐ»ÑƒÐ³Ð¸ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð°."
    },
    {
      "id": "2",
      "intents": ["INFO"],
      "domains": [
        {"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": []}
      ],
      "is_spam": false,
      "urgency_score": 1,
      "reasoning": "ÐŸÑ€Ð¾ÑÑ‚Ð¾ ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ðµ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸Ðº Ð¾Ð±ÑŠÐµÐºÑ‚Ð° (Ð²Ñ‹ÑÐ¾Ñ‚Ð° Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¾Ð²), Ð±ÐµÐ· Ð¿Ð¾Ð¸ÑÐºÐ° Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ â€” Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ, Ð½Ðµ Ð»Ð¸Ð´."
    },
    {
      "id": "3",
      "intents": ["REQUEST"],
      "domains": [
        {"domain": "LAW", "subcategories": ["LAWYER"]},
        {"domain": "PURCHASE_OF_REAL_ESTATE", "subcategories": []}
      ],
      "is_spam": false,
      "urgency_score": 3,
      "reasoning": "ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¸Ñ‰ÐµÑ‚ ÑŽÑ€Ð¸ÑÑ‚Ð° Ð´Ð»Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ñƒ â€” ÑÐ²Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ ÑƒÑÐ»ÑƒÐ³Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð° (Ð»Ð¸Ð´)."
    },
    {
      "id": "4",
      "intents": ["OFFER"],
      "domains": [
        {"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": []}
      ],
      "is_spam": false,
      "urgency_score": 1,
      "reasoning": "ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸ÐºÐ° Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚ÑƒÑŽ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ (Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ±ÐµÐ»ÑŒ, Ð¿Ð¾Ð´Ð°Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚) Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ð¾Ð¹ â€” ÑÑ‚Ð¾ Ð¼ÐµÐ»ÐºÐ°Ñ Ð¿Ð¾Ð´Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°, Ð½Ðµ REQUEST-Ð»Ð¸Ð´."
    },
    {
      "id": "5",
      "intents": ["OTHER"],
      "domains": [
        {"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": []}
      ],
      "is_spam": false,
      "urgency_score": 1,
      "reasoning": "ÐÐµÐ¿Ð¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ, Ð¾Ð±Ñ€Ñ‹Ð²Ð¾Ðº Ñ„Ñ€Ð°Ð·Ñ‹ Ð±ÐµÐ· ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð° Ð¸ Ð±ÐµÐ· Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° â€” Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ REQUEST-Ð»Ð¸Ð´Ð¾Ð¼."
    },
    {
      "id": "6",
      "intents": ["REQUEST"],
      "domains": [
        {"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": ["SMALL_TOOLS_AND_MATERIALS"]}
      ],
      "is_spam": false,
      "urgency_score": 2,
      "reasoning": "Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° Ð°Ñ€ÐµÐ½Ð´Ñƒ/Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ (ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ‹Ð»ÐµÑÐ¾Ñ) â€” ÑÑ‚Ð¾ REQUEST-Ð»Ð¸Ð´, Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑÑ Ðº Ð¼ÐµÐ»ÐºÐ¸Ð¼ ÑÑ‚Ñ€Ð¾Ð¹Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°Ð¼/Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼."
    },
    {
      "id": "7",
      "intents": ["OFFER"],
      "domains": [
        {"domain": "CONSTRUCTION_AND_REPAIR", "subcategories": []}
      ],
      "is_spam": false,
      "urgency_score": 1,
      "reasoning": "ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ (ÑÐ»Ð¾Ð¶Ð¸Ñ‚ÑŒ ÐºÐ¸Ñ€Ð¿Ð¸Ñ‡Ð¸) Ñ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¾Ð¿Ð»Ð°Ñ‚Ð¾Ð¹ â€” ÑÑ‚Ð¾ Ð¼ÐµÐ»ÐºÐ°Ñ Ð¿Ð¾Ð´Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°, Ð½Ðµ REQUEST-Ð»Ð¸Ð´."
    }
  ]
}
"""


# Enums for classification
class IntentType(str, Enum):
    """Message intent types."""
    REQUEST = "REQUEST"
    OFFER = "OFFER"
    RECOMMENDATION = "RECOMMENDATION"
    COMPLAINT = "COMPLAINT"
    INFO = "INFO"
    OTHER = "OTHER"


class DomainType(str, Enum):
    """Message domain types."""
    CONSTRUCTION_AND_REPAIR = "CONSTRUCTION_AND_REPAIR"
    RENTAL_OF_REAL_ESTATE = "RENTAL_OF_REAL_ESTATE"
    PURCHASE_OF_REAL_ESTATE = "PURCHASE_OF_REAL_ESTATE"
    REAL_ESTATE_AGENT = "REAL_ESTATE_AGENT"
    LAW = "LAW"
    SERVICES = "SERVICES"
    AUTO = "AUTO"
    MARKETPLACE = "MARKETPLACE"
    SOCIAL_CAPITAL = "SOCIAL_CAPITAL"
    OPERATIONAL_MANAGEMENT = "OPERATIONAL_MANAGEMENT"
    REPUTATION = "REPUTATION"
    NONE = "NONE"


# Pydantic models for classification
class DomainInfo(BaseModel):
    """Domain information with optional subcategories."""
    domain: DomainType = Field(
        ..., 
        description="Select the most relevant high-level domain."
    )
    subcategories: List[str] = Field(
        default_factory=list,
        description=(
            "Specific subcategories inferred from text. Use EXACT names from this list based on the domain:\n"
            "1. CONSTRUCTION_AND_REPAIR:\n"
            "   - MAJOR_RENOVATION: ÐšÑ€ÑƒÐ¿Ð½Ñ‹Ð¹ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚ - Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ð¿ÐµÑ€Ð²Ñ‹Ñ… ÑÑ‚Ð°Ð¿Ð¾Ð² Ð² Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ðµ ÐºÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ñ‹ Ð¸Ð»Ð¸ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ðµ Ð´Ð¾Ð¼Ð°, ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾Ð±ÑŠÐµÐ¼Ð° Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼ Ñ‡ÐµÐºÐ¾Ð¼\n"
            "   - REPAIR_SERVICES: Ð ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ñ‹Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸ - ÑÑ‚ÑÐ¶ÐºÐ° Ð¿Ð¾Ð»Ð°, ÑƒÑÐ»ÑƒÐ³Ð¸ Ð¿Ð»Ð¸Ñ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ° Ð¸Ð»Ð¸ Ð¼Ð°Ð»ÑÑ€Ð°, ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¾ÐºÐ¾Ð½, Ð¿Ð¾Ñ‚Ð¾Ð»ÐºÐ¸, Ð¿Ñ€Ð¸ÐµÐ¼ÐºÐ° ÐºÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ñ‹\n"
            "   - SMALL_TOOLS_AND_MATERIALS: ÐœÐµÐ»ÐºÐ¸Ðµ ÑÑ‚Ñ€Ð¾Ð¹Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ - Ð°Ñ€ÐµÐ½Ð´Ð°/Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ (Ð¿Ñ‹Ð»ÐµÑÐ¾Ñ, Ñ‚ÐµÐ¿Ð»Ð¾Ð²Ð¸Ð·Ð¾Ñ€, ÑÐ²ÐµÑ€Ð»Ð¾), ÐºÑƒÐ¿Ð»Ñ/Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð° Ð¼ÐµÐ»ÐºÐ¸Ñ… ÑÑ‚Ñ€Ð¾Ð¹Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² (Ð³Ð¸Ð¿ÑÐ¾ÐºÐ°Ñ€Ñ‚Ð¾Ð½, Ð´Ð²ÐµÑ€Ð¸ Ð¾Ñ‚ Ð·Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‰Ð¸ÐºÐ°), Ð¼ÐµÐ»ÐºÐ¸Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸ (ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¾Ð´Ð½Ð¾Ð¹ Ð´Ð²ÐµÑ€Ð¸, Ð²Ñ‹Ð²Ð¾Ð· Ð¼ÑƒÑÐ¾Ñ€Ð°)\n"
            "2. RENTAL_OF_REAL_ESTATE:\n"
            "   - RENTAL_APARTMENT: ÐšÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ð°\n"
            "   - RENTAL_HOUSE: Ð”Ð¾Ð¼, ÐºÐ¾Ñ‚Ñ‚ÐµÐ´Ð¶, Ð´Ð°Ñ‡Ð°\n"
            "   - RENTAL_PARKING: ÐœÐ°ÑˆÐ¸Ð½Ð¾Ð¼ÐµÑÑ‚Ð¾, Ð¿Ð°Ñ€ÐºÐ¾Ð²Ð¾Ñ‡Ð½Ð¾Ðµ Ð¼ÐµÑÑ‚Ð¾\n"
            "   - RENTAL_STORAGE: ÐšÐ»Ð°Ð´Ð¾Ð²Ð°Ñ\n"
            "   - RENTAL_LAND: Ð£Ñ‡Ð°ÑÑ‚Ð¾Ðº\n"
            "3. PURCHASE_OF_REAL_ESTATE:\n"
            "   - PURCHASE_APARTMENT: ÐšÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ð°\n"
            "   - PURCHASE_HOUSE: Ð”Ð¾Ð¼, ÐºÐ¾Ñ‚Ñ‚ÐµÐ´Ð¶, Ð´Ð°Ñ‡Ð°\n"
            "   - PURCHASE_PARKING: ÐœÐ°ÑˆÐ¸Ð½Ð¾Ð¼ÐµÑÑ‚Ð¾, Ð¿Ð°Ñ€ÐºÐ¾Ð²Ð¾Ñ‡Ð½Ð¾Ðµ Ð¼ÐµÑÑ‚Ð¾\n"
            "   - PURCHASE_STORAGE: ÐšÐ»Ð°Ð´Ð¾Ð²Ð°Ñ\n"
            "   - PURCHASE_LAND: Ð£Ñ‡Ð°ÑÑ‚Ð¾Ðº\n"
            "4. REAL_ESTATE_AGENT:\n"
            "   - AGENT: ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ðµ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸, Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€, Ñ€Ð¸ÐµÐ»Ñ‚Ð¾Ñ€ÑÐºÐ¾Ðµ Ð°Ð³ÐµÐ½Ñ‚ÑÑ‚Ð²Ð¾, Ð±Ñ€Ð¾ÐºÐµÑ€ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n"
            "5. LAW:\n"
            "   - LAWYER: Ð®Ñ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ, ÑƒÑÐ»ÑƒÐ³Ð¸ ÑŽÑ€Ð¸ÑÑ‚Ð°, ÑŽÑ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð¾, ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¾Ð²\n"
            "6. SERVICES:\n"
            "   - BEAUTY_AND_HEALTH: ÐšÑ€Ð°ÑÐ¾Ñ‚Ð° Ð¸ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ - Ð¼Ð°Ð½Ð¸ÐºÑŽÑ€ Ð½Ð° Ð´Ð¾Ð¼Ñƒ, Ð¿Ð°Ñ€Ð¸ÐºÐ¼Ð°Ñ…ÐµÑ€Ñ‹, Ð¼Ð°ÑÑÐ°Ð¶, Ð±Ñ€Ð¾Ð²Ð¸, ÑÐ°Ð»Ð¾Ð½ Ñ€ÑÐ´Ð¾Ð¼\n"
            "   - HOUSEHOLD_SERVICES: Ð‘Ñ‹Ñ‚Ð¾Ð²Ñ‹Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸ - ÐºÐ»Ð¸Ð½Ð¸Ð½Ð³, Ñ…Ð¸Ð¼Ñ‡Ð¸ÑÑ‚ÐºÐ°, \"Ð¼ÑƒÐ¶ Ð½Ð° Ñ‡Ð°Ñ\", Ñ€ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð´ÐµÐ¶Ð´Ñ‹\n"
            "   - CHILD_CARE_AND_EDUCATION: ÐžÐ±ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸ Ð¿Ñ€Ð¸ÑÐ¼Ð¾Ñ‚Ñ€ Ð·Ð° Ð´ÐµÑ‚ÑŒÐ¼Ð¸ - Ñ€ÐµÐ¿ÐµÑ‚Ð¸Ñ‚Ð¾Ñ€Ñ‹, Ð½ÑÐ½Ð¸, Ð´ÐµÑ‚ÑÐºÐ¸Ðµ ÐºÑ€ÑƒÐ¶ÐºÐ¸, Ð»Ð¾Ð³Ð¾Ð¿ÐµÐ´Ñ‹, Ð´ÐµÑ‚ÑÐºÐ¸Ðµ ÑÐ°Ð´Ñ‹\n"
            "   - DELIVERY_SERVICES: Ð”Ð¾ÑÑ‚Ð°Ð²ÐºÐ° Ð¸ ÐºÑƒÑ€ÑŒÐµÑ€ÑÐºÐ°Ñ ÑÐ»ÑƒÐ¶Ð±Ð° - Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ° ÐµÐ´Ñ‹, Ð»ÐµÐºÐ°Ñ€ÑÑ‚Ð², Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº, Ð¿Ð¾ÑÑ‹Ð»Ð¾Ðº\n"
            "   - TECH_REPAIR: Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¸ - Ð¿Ð¾Ñ‡Ð¸Ð½ÐºÐ° ÑÑ‚Ð¸Ñ€Ð°Ð»ÐºÐ¸, Ñ€ÐµÐ¼Ð¾Ð½Ñ‚ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ð°, Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð°\n"
            "7. AUTO:\n"
            "   - AUTO_PURCHASE: ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ - Ð¿Ð¾Ð´Ð±Ð¾Ñ€ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹, Ð¿Ñ€Ð¸Ð³Ð¾Ð½ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ, ÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð¾Ð±Ñ€ÐµÑ‚ÐµÐ½Ð¸Ðµ\n"
            "   - AUTO_PREMIUM_DETAILING: Ð”Ð¾Ñ€Ð¾Ð³Ð¾ÑÑ‚Ð¾ÑÑ‰Ð¸Ð¹ Ð´ÐµÑ‚ÐµÐ¹Ð»Ð¸Ð½Ð³ - Ð¾Ð±ÐºÐ»ÐµÐ¹ÐºÐ° Ð¸Ð»Ð¸ Ð¿Ð¾ÐºÑ€Ð°ÑÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ, Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð´Ð¾Ñ€Ð¾Ð³Ð¾ÑÑ‚Ð¾ÑÑ‰Ð¸Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸ Ð¸Ð· Ñ‚Ð¾Ð¹ Ð¶Ðµ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸\n"
            "   - AUTO_REPAIR: Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ - Ð·Ð°Ð¼ÐµÐ½Ð° ÐºÐ°ÐºÐ¸Ñ…-Ð»Ð¸Ð±Ð¾ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹, Ñ€Ð°Ð±Ð¾Ñ‚Ð° Ñ ÐºÑƒÐ·Ð¾Ð²Ð¾Ð¼ Ð¸ Ð¿Ð¾Ð´Ð¾Ð±Ð½Ð¾Ðµ\n"
            "   - AUTO_SERVICE_STATION: Ð¡Ð¢Ðž, ÑˆÐ¸Ð½Ð¾Ð¼Ð¾Ð½Ñ‚Ð°Ð¶ Ð¸ Ð¼ÐµÐ»ÐºÐ¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ - ÑˆÐ¸Ð½Ð¾Ð¼Ð¾Ð½Ñ‚Ð°Ð¶, Ð¼ÐµÐ»ÐºÐ¸Ð¹ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚, Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ\n"
            "8. MARKETPLACE:\n"
            "   - BUY_SELL_GOODS: ÐšÑƒÐ¿Ð»Ñ-Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð° Ð²ÐµÑ‰ÐµÐ¹ - Ð´ÐµÑ‚ÑÐºÐ¸Ð¹ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹, Ð¼ÐµÐ±ÐµÐ»ÑŒ, Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ°\n"
            "   - GIVE_AWAY: Ð”Ð°Ñ€ÐµÐ½Ð¸Ðµ - Ð¾Ñ‚Ð´Ð°Ð¼ Ð´Ð°Ñ€Ð¾Ð¼, Ð¸Ð·Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÐµÑ‰ÐµÐ¹ Ð·Ð° ÑÐ°Ð¼Ð¾Ð²Ñ‹Ð²Ð¾Ð· Ð¸Ð»Ð¸ \"ÑˆÐ¾ÐºÐ¾Ð»Ð°Ð´ÐºÑƒ\"\n"
            "   - HOMEMADE_FOOD: Ð”Ð¾Ð¼Ð°ÑˆÐ½ÑÑ ÐµÐ´Ð° - Ð¢Ð¾Ñ€Ñ‚Ñ‹ Ð½Ð° Ð·Ð°ÐºÐ°Ð·, Ð¿ÐµÐ»ÑŒÐ¼ÐµÐ½Ð¸, Ñ„ÐµÑ€Ð¼ÐµÑ€ÑÐºÐ¸Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹\n"
            "   - BUYER_SERVICES: Ð£ÑÐ»ÑƒÐ³Ð¸ Ð±Ð°Ð¹ÐµÑ€Ð¾Ð² - Ð·Ð°ÐºÐ°Ð· Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ð¸Ð·-Ð·Ð° Ñ€ÑƒÐ±ÐµÐ¶Ð°, ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ñ‹Ðµ Ð·Ð°ÐºÑƒÐ¿ÐºÐ¸\n"
            "9. SOCIAL_CAPITAL:\n"
            "   - PARENTING: Ð Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð¾ - Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»Ð¸ÐºÐ»Ð¸Ð½Ð¸Ðº, Ð¿Ñ€Ð¸Ð²Ð¸Ð²Ð¾Ðº, ÑˆÐºÐ¾Ð», Ð´ÐµÑ‚ÑÐºÐ¸Ñ… Ð¿Ð»Ð¾Ñ‰Ð°Ð´Ð¾Ðº\n"
            "   - HOBBY_AND_SPORT: Ð¥Ð¾Ð±Ð±Ð¸ Ð¸ ÑÐ¿Ð¾Ñ€Ñ‚ - ÐŸÐ¾Ð¸ÑÐº Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð² Ð´Ð»Ñ Ð±ÐµÐ³Ð°, Ñ‚ÐµÐ½Ð½Ð¸ÑÐ°, Ð½Ð°ÑÑ‚Ð¾Ð»ÑŒÐ½Ñ‹Ñ… Ð¸Ð³Ñ€, Ð²Ñ‹Ð³ÑƒÐ» ÑÐ¾Ð±Ð°Ðº\n"
            "   - EVENTS: Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ - ÑÑƒÐ±Ð±Ð¾Ñ‚Ð½Ð¸ÐºÐ¸, Ð¿Ñ€Ð°Ð·Ð´Ð½Ð¸ÐºÐ¸ Ð´Ð²Ð¾Ñ€Ð°, ÑÐ¾Ð±Ñ€Ð°Ð½Ð¸Ñ\n"
            "10. OPERATIONAL_MANAGEMENT:\n"
            "   - LOST_AND_FOUND: Ð‘ÑŽÑ€Ð¾ Ð½Ð°Ñ…Ð¾Ð´Ð¾Ðº - ÐºÐ»ÑŽÑ‡Ð¸, ÐºÐ°Ñ€Ñ‚Ñ‹, Ð¶Ð¸Ð²Ð¾Ñ‚Ð½Ñ‹Ðµ, Ð¸Ð³Ñ€ÑƒÑˆÐºÐ¸\n"
            "   - SECURITY: Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ - Ð¿Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½Ð¸Ðµ, Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð´Ð²ÐµÑ€Ð¸, Ð¿Ð¾Ð¶Ð°Ñ€Ð½Ð°Ñ ÑÐ¸Ð³Ð½Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ\n"
            "   - LIVING_ENVIRONMENT: Ð¡Ñ€ÐµÐ´Ð° Ð¾Ð±Ð¸Ñ‚Ð°Ð½Ð¸Ñ - Ð¼ÑƒÑÐ¾Ñ€, Ð·Ð°Ð¿Ð°Ñ…Ð¸, Ð¾Ð·ÐµÐ»ÐµÐ½ÐµÐ½Ð¸Ðµ, ÑˆÑƒÐ¼\n"
            "   - MANAGEMENT_COMPANY_INTERACTION: Ð’Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ Ð£Ðš - Ð¶Ð°Ð»Ð¾Ð±Ñ‹, Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ñ€Ð¸Ñ„Ð¾Ð²\n"
            "11. REPUTATION:\n"
            "   - PERSONAL_BRAND: Ð›Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð±Ñ€ÐµÐ½Ð´ - Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ð»Ð¸Ñ‡Ð½Ð¾ÑÑ‚Ð¸\n"
            "   - COMPANIES_REPUTATION: Ð—Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‰Ð¸ÐºÐ¸, Ð–Ðš, Ð£Ðš\n"
            "12. NONE: Ð½ÐµÑ‚ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÐµÐ³Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð°"
        )
    )


class ClassifiedMessage(BaseModel):
    """Classification result for a single message."""
    id: str = Field(..., description="Unique message ID from input.")
    
    intents: List[IntentType] = Field(
        ..., 
        description=(
            "Detect user intentions:\n"
            "- REQUEST: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¸Ñ‰ÐµÑ‚ Ð¸Ð»Ð¸ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€, ÑƒÑÐ»ÑƒÐ³Ñƒ, Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ Ð¸Ð»Ð¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð´Ð»Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ ÑÐ²Ð¾ÐµÐ¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸. Ð­Ñ‚Ð¾ Ñ†ÐµÐ½Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñâ€‘Ð»Ð¸Ð´Ñ‹: Ð² Ñ‚ÐµÐºÑÑ‚Ðµ ÑÐ²Ð½Ð¾ Ð¸Ð»Ð¸ Ð½ÐµÑÐ²Ð½Ð¾ ÐµÑÑ‚ÑŒ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÑŒ, Ð¸ Ð½Ð° Ñ‚Ð°ÐºÐ¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑƒÐ¼ÐµÑÑ‚Ð½Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÐµÐ¹ (Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð¼, Ðº ÐºÐ¾Ð¼Ñƒ Ð¾Ð±Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒÑÑ; Ñ‡Ñ‚Ð¾ Ð¸ Ð³Ð´Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ).\n"
            "- OFFER: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€, ÑƒÑÐ»ÑƒÐ³Ñƒ Ð¸Ð»Ð¸ ÑÐ²Ð¾Ð¸ Ð½Ð°Ð²Ñ‹ÐºÐ¸/ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ (Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð°, Ñ€ÐµÐºÐ»Ð°Ð¼Ð°, ÑÐ°Ð¼Ð¾Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ). Ð¤Ð¾ÐºÑƒÑ Ð½Ð° Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð´Ð°Ñ‘Ñ‚ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ñ‘Ñ‚, Ð° Ð½Ðµ Ð¸Ñ‰ÐµÑ‚.\n"
            "- RECOMMENDATION: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð´ÐµÐ»Ð¸Ñ‚ÑÑ ÑÐ¾Ð²ÐµÑ‚Ð¾Ð¼ Ð¸Ð»Ð¸ Ð¾Ñ‚Ð·Ñ‹Ð²Ð¾Ð¼ Ð¸ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ, ÑÐµÑ€Ð²Ð¸Ñ, Ð¼ÐµÑÑ‚Ð¾ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Â«ÑÐ¾Ð²ÐµÑ‚ÑƒÑŽ Ð²Ñ€Ð°Ñ‡Ð° XÂ», Â«Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ ÑÐµÑ€Ð²Ð¸Ñ YÂ»).\n"
            "- COMPLAINT: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ñ‹Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð½ÐµÐ³Ð°Ñ‚Ð¸Ð², Ð½ÐµÐ´Ð¾Ð²Ð¾Ð»ÑŒÑÑ‚Ð²Ð¾ Ð¸Ð»Ð¸ Ð¶Ð°Ð»Ð¾Ð±Ñƒ Ð½Ð° Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚, ÑƒÑÐ»ÑƒÐ³Ñƒ, ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ, Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ° Ð¸Ð»Ð¸ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑŽ (Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹, Ð¿Ð»Ð¾Ñ…Ð¾Ð¹ Ð¾Ð¿Ñ‹Ñ‚, Â«Ð²ÑÑ‘ Ð¿Ð»Ð¾Ñ…Ð¾Â»).\n"
            "- INFO: Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð°Ñ‘Ñ‚ Ð½ÐµÐ¹Ñ‚Ñ€Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¸Ð»Ð¸ Ñ„Ð°ÐºÑ‚, Ð±ÐµÐ· ÑÐ²Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°, Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¸Ð»Ð¸ Ð¶Ð°Ð»Ð¾Ð±Ñ‹ (Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸, Ð¿Ð¾ÑÑÐ½ÐµÐ½Ð¸Ñ, ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ñ, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð´ÐµÐ»Ð¸Ñ‚ÑÑ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸).\n"
            "- OTHER: Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ, ÑÐ¼Ð°Ð¹Ð»Ð¸ÐºÐ¸ Ð±ÐµÐ· Ñ‚ÐµÐºÑÑ‚Ð°, Ð¾Ñ„Ñ„Ñ‚Ð¾Ð¿, Ð±ÐµÑÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð»Ð¸ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ, Ð¿Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼ Ð½ÐµÐ»ÑŒÐ·Ñ Ð½Ð°Ð´Ñ‘Ð¶Ð½Ð¾ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¸Ð½Ñ‚ÐµÐ½Ñ‚Ð¾Ð²."
        )
    )
    
    domains: List[DomainInfo] = Field(..., description="List of relevant domains and their subcategories.")
    
    is_spam: bool = Field(
        ..., 
        description="True, ÐµÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¸Ð¼ÐµÐµÑ‚ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¸ Ð¼Ð°ÑÑÐ¾Ð²Ð¾Ð¹ Ñ€Ð°ÑÑÑ‹Ð»ÐºÐ¸, Ð¾Ð±Ð¸Ð»Ð¸Ðµ ÑÐ¼Ð¾Ð´Ð·Ð¸, ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ð²Ð½ÐµÑˆÐ½Ð¸Ðµ ÐºÐ°Ð½Ð°Ð»Ñ‹, Ð¸ ÑÐ²Ð½Ð¾ Ð½Ðµ Ð¾Ñ‚ Ð¶Ð¸Ñ‚ÐµÐ»Ñ."
    )
    
    urgency_score: int = Field(
        ..., 
        description=(
            "Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð² Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ðµ [1, 5], Ð³Ð´Ðµ:\n"
            "5: Ñ‡Ñ€ÐµÐ·Ð²Ñ‹Ñ‡Ð°Ð¹Ð½Ð¾Ðµ Ð¿Ñ€Ð¾Ð¸ÑÑˆÐµÑÑ‚Ð²Ð¸Ðµ (Ð¿Ð¾Ð¶Ð°Ñ€, Ð¿Ð¾Ñ‚Ð¾Ð¿, Ð´Ñ€Ð°ÐºÐ°)\n"
            "4: ÑÑ€Ð¾Ñ‡Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° (Ð·Ð°ÑÑ‚Ñ€ÑÐ» Ð»Ð¸Ñ„Ñ‚, Ð½ÐµÑ‚ Ð²Ð¾Ð´Ñ‹)\n"
            "3: ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ/Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°\n"
            "1-2: Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ Ð½ÐµÑÑ€Ð¾Ñ‡Ð½Ð¾Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ (Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ»Ð¾Ñ‡Ð½Ð¾Ð¹)"
        )
    )
    
    reasoning: str = Field(
        ..., 
        description="Very brief logic (max 1 sentence) explaining the chosen Intents and Urgency."
    )


class ClassificationBatchResult(BaseModel):
    """Batch classification result containing multiple classified messages."""
    classified_messages: List[ClassifiedMessage]


def get_json_schema() -> dict:
    """
    Generate JSON schema for OpenRouter/OpenAI structured output.
    
    Returns:
        Dictionary with JSON schema format compatible with OpenRouter API.
    """
    schema = ClassificationBatchResult.model_json_schema()
    
    return {
        "type": "json_schema",
        "json_schema": {
            "name": "classification_result",
            "strict": True,
            "schema": schema
        }
    }

